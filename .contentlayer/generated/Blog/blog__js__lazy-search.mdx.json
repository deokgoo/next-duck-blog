{
  "title": "자바스크립트 지연 검색 delay search",
  "date": "2022-03-13T00:00:00.000Z",
  "tags": [
    "js",
    "delay",
    "search"
  ],
  "draft": false,
  "summary": "자바스크립트로 지연 검색을 구현해보자",
  "body": {
    "raw": "\n최근 프로젝트를 보고 느낀점이 무의미한 API호출이 쌓여\n\n재앙으로 닥치는것을 보아 이러한 작은 성능개선 한가지 정리하고자 합니다.\n\n검색엔진을 구현할때 API호출을 줄이는 방법으로서 지연 호출을\n\n하는 방법에 대해서 알아보겠습니다.\n\n<br/>\n\n# 알아야할 것들\n1. setTimeout\n2. clearTimeout\n\nsetTimeout은 비동기적으로 설정한 delay 이후에 실행할 수 있도록 하는 함수입니다.\n\nclearTimeout은 setTimeout을 취소할 수 있습니다. [MDN 참고](https://developer.mozilla.org/ko/docs/Web/API/setTimeout)\n\n(macroTask queue에서 event loop를 통해 call stack으로 넘어간다.)\n\n<br/>\n\n# 구현\n구현 방법은 싱글톤과 유사합니다. setTimeout으로 delay 이후에 API 호출 하는데\n도중에 입력이 들어오면 기존 setTimeout을 죽이고 새로운 setTimeout을 만드는 것입니다. (클로저 사용해서 구현할겁니다)\n\n```javascript\nconst createDelay = (__callback, ms) => {\n  let instance;\n\n  return () => {\n    clearTimeout(instance);\n    instance = setTimeout(() => __callback(), ms);\n  }\n}\n\nconst fetchData = () => {\n  ...fetchAPI Call\n}\n\nconst delaySearch = createDelay(fetchData, 250);\n\n```\n\n개인적으로 delay는 250ms ~ 500ms가 유저 친화적이라고 생각합니다.\n\n\n아래는 사용 예 입니다.\n\n<iframe height=\"300\" style={{width: '100%', height: '600px'}} scrolling=\"no\" title=\"example\" src=\"https://codepen.io/deokgoo/embed/gOoOzxB?default-tab=js%2Cresult\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href=\"https://codepen.io/deokgoo/pen/gOoOzxB\">\n  Untitled</a> by deokgoo (<a href=\"https://codepen.io/deokgoo\">@deokgoo</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.\n</iframe>\n",
    "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},o=(a,e,s,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>e[c],enumerable:!(t=m(e,c))||t.enumerable});return a};var w=(a,e,s)=>(s=a!=null?h(N(a)):{},o(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),y=a=>o(l({},\"__esModule\",{value:!0}),a);var r=f((T,i)=>{i.exports=_jsx_runtime});var b={};g(b,{default:()=>p,frontmatter:()=>x});var n=w(r()),x={title:\"\\uC790\\uBC14\\uC2A4\\uD06C\\uB9BD\\uD2B8 \\uC9C0\\uC5F0 \\uAC80\\uC0C9 delay search\",date:\"2022-03-13\",tags:[\"js\",\"delay\",\"search\"],draft:!1,summary:\"\\uC790\\uBC14\\uC2A4\\uD06C\\uB9BD\\uD2B8\\uB85C \\uC9C0\\uC5F0 \\uAC80\\uC0C9\\uC744 \\uAD6C\\uD604\\uD574\\uBCF4\\uC790\"};function d(a){let e={a:\"a\",code:\"code\",h1:\"h1\",li:\"li\",ol:\"ol\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",svg:\"svg\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\uCD5C\\uADFC \\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uBCF4\\uACE0 \\uB290\\uB080\\uC810\\uC774 \\uBB34\\uC758\\uBBF8\\uD55C API\\uD638\\uCD9C\\uC774 \\uC313\\uC5EC\"}),(0,n.jsx)(e.p,{children:\"\\uC7AC\\uC559\\uC73C\\uB85C \\uB2E5\\uCE58\\uB294\\uAC83\\uC744 \\uBCF4\\uC544 \\uC774\\uB7EC\\uD55C \\uC791\\uC740 \\uC131\\uB2A5\\uAC1C\\uC120 \\uD55C\\uAC00\\uC9C0 \\uC815\\uB9AC\\uD558\\uACE0\\uC790 \\uD569\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.p,{children:\"\\uAC80\\uC0C9\\uC5D4\\uC9C4\\uC744 \\uAD6C\\uD604\\uD560\\uB54C API\\uD638\\uCD9C\\uC744 \\uC904\\uC774\\uB294 \\uBC29\\uBC95\\uC73C\\uB85C\\uC11C \\uC9C0\\uC5F0 \\uD638\\uCD9C\\uC744\"}),(0,n.jsx)(e.p,{children:\"\\uD558\\uB294 \\uBC29\\uBC95\\uC5D0 \\uB300\\uD574\\uC11C \\uC54C\\uC544\\uBCF4\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"}),(0,n.jsx)(\"br\",{}),(0,n.jsxs)(e.h1,{className:\"content-header\",id:\"\\uC54C\\uC544\\uC57C\\uD560-\\uAC83\\uB4E4\",children:[(0,n.jsx)(e.a,{href:\"#\\uC54C\\uC544\\uC57C\\uD560-\\uAC83\\uB4E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\uC54C\\uC544\\uC57C\\uD560 \\uAC83\\uB4E4\"]}),(0,n.jsxs)(e.ol,{children:[(0,n.jsx)(e.li,{children:\"setTimeout\"}),(0,n.jsx)(e.li,{children:\"clearTimeout\"})]}),(0,n.jsx)(e.p,{children:\"setTimeout\\uC740 \\uBE44\\uB3D9\\uAE30\\uC801\\uC73C\\uB85C \\uC124\\uC815\\uD55C delay \\uC774\\uD6C4\\uC5D0 \\uC2E4\\uD589\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD558\\uB294 \\uD568\\uC218\\uC785\\uB2C8\\uB2E4.\"}),(0,n.jsxs)(e.p,{children:[\"clearTimeout\\uC740 setTimeout\\uC744 \\uCDE8\\uC18C\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/ko/docs/Web/API/setTimeout\",children:\"MDN \\uCC38\\uACE0\"})]}),(0,n.jsx)(e.p,{children:\"(macroTask queue\\uC5D0\\uC11C event loop\\uB97C \\uD1B5\\uD574 call stack\\uC73C\\uB85C \\uB118\\uC5B4\\uAC04\\uB2E4.)\"}),(0,n.jsx)(\"br\",{}),(0,n.jsxs)(e.h1,{className:\"content-header\",id:\"\\uAD6C\\uD604\",children:[(0,n.jsx)(e.a,{href:\"#\\uAD6C\\uD604\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\uAD6C\\uD604\"]}),(0,n.jsx)(e.p,{children:\"\\uAD6C\\uD604 \\uBC29\\uBC95\\uC740 \\uC2F1\\uAE00\\uD1A4\\uACFC \\uC720\\uC0AC\\uD569\\uB2C8\\uB2E4. setTimeout\\uC73C\\uB85C delay \\uC774\\uD6C4\\uC5D0 API \\uD638\\uCD9C \\uD558\\uB294\\uB370 \\uB3C4\\uC911\\uC5D0 \\uC785\\uB825\\uC774 \\uB4E4\\uC5B4\\uC624\\uBA74 \\uAE30\\uC874 setTimeout\\uC744 \\uC8FD\\uC774\\uACE0 \\uC0C8\\uB85C\\uC6B4 setTimeout\\uC744 \\uB9CC\\uB4DC\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4. (\\uD074\\uB85C\\uC800 \\uC0AC\\uC6A9\\uD574\\uC11C \\uAD6C\\uD604\\uD560\\uAC81\\uB2C8\\uB2E4)\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"createDelay\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"__callback\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ms\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" instance\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"clearTimeout\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"instance\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    instance \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setTimeout\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"__callback\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ms\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"fetchData\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),\"fetchAPI \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Call\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" delaySearch \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"createDelay\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"fetchData\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"250\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),(0,n.jsx)(e.p,{children:\"\\uAC1C\\uC778\\uC801\\uC73C\\uB85C delay\\uB294 250ms ~ 500ms\\uAC00 \\uC720\\uC800 \\uCE5C\\uD654\\uC801\\uC774\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD569\\uB2C8\\uB2E4.\"}),(0,n.jsx)(e.p,{children:\"\\uC544\\uB798\\uB294 \\uC0AC\\uC6A9 \\uC608 \\uC785\\uB2C8\\uB2E4.\"}),(0,n.jsx)(\"iframe\",{height:\"300\",style:{width:\"100%\",height:\"600px\"},scrolling:\"no\",title:\"example\",src:\"https://codepen.io/deokgoo/embed/gOoOzxB?default-tab=js%2Cresult\",frameborder:\"no\",loading:\"lazy\",allowtransparency:\"true\",allowfullscreen:\"true\",children:(0,n.jsxs)(e.p,{children:[\"See the Pen \",(0,n.jsx)(\"a\",{href:\"https://codepen.io/deokgoo/pen/gOoOzxB\",children:\"Untitled\"}),\" by deokgoo (\",(0,n.jsx)(\"a\",{href:\"https://codepen.io/deokgoo\",children:\"@deokgoo\"}),\") on \",(0,n.jsx)(\"a\",{href:\"https://codepen.io\",children:\"CodePen\"}),\".\"]})})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(b);})();\n;return Component;"
  },
  "_id": "blog/js/lazy-search.mdx",
  "_raw": {
    "sourceFilePath": "blog/js/lazy-search.mdx",
    "sourceFileName": "lazy-search.mdx",
    "sourceFileDir": "blog/js",
    "contentType": "mdx",
    "flattenedPath": "blog/js/lazy-search"
  },
  "type": "Blog",
  "readingTime": {
    "text": "2 min read",
    "minutes": 1.7,
    "time": 102000,
    "words": 340
  },
  "slug": "js/lazy-search",
  "path": "blog/js/lazy-search",
  "filePath": "blog/js/lazy-search.mdx",
  "toc": [
    {
      "value": "알아야할 것들",
      "url": "#알아야할-것들",
      "depth": 1
    },
    {
      "value": "구현",
      "url": "#구현",
      "depth": 1
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "자바스크립트 지연 검색 delay search",
    "datePublished": "2022-03-13T00:00:00.000Z",
    "dateModified": "2022-03-13T00:00:00.000Z",
    "description": "자바스크립트로 지연 검색을 구현해보자",
    "image": "/static/images/main-logo-no-bg.png",
    "url": "https://duck-blog.netlify.app/blog/js/lazy-search"
  }
}